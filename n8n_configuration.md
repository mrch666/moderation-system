# üõ†Ô∏è –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø n8n –î–õ–Ø –†–ê–ë–û–¢–´ –° –°–ò–°–¢–ï–ú–û–ô –ú–û–î–ï–†–ê–¶–ò–ò

## üîß –ü–†–û–ë–õ–ï–ú–ê
n8n –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å timeout=100ms, –∞ —Å–µ—Ä–≤–µ—Ä—É –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏.

## ‚úÖ –†–ï–®–ï–ù–ò–ï 1: –£–≤–µ–ª–∏—á–∏—Ç—å timeout –≤ n8n

### –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö HTTP Request node:
1. **Timeout**: `5000` (5 —Å–µ–∫—É–Ω–¥) –∏–ª–∏ `30000` (30 —Å–µ–∫—É–Ω–¥)
2. **Max Redirects**: `5`
3. **Follow Redirect**: ‚úÖ –≤–∫–ª—é—á–µ–Ω–æ
4. **Ignore SSL Issues**: –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

### –°–∫—Ä–∏–Ω—à–æ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫:
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ HTTP Request (V3)                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Method: POST                        ‚îÇ
‚îÇ URL: http://192.168.1.189:3000/... ‚îÇ
‚îÇ Authentication: None                ‚îÇ
‚îÇ                                    ‚îÇ
‚îÇ ‚öôÔ∏è Options:                         ‚îÇ
‚îÇ   ‚Ä¢ Timeout: 5000                  ‚îÇ
‚îÇ   ‚Ä¢ Max Redirects: 5               ‚îÇ
‚îÇ   ‚Ä¢ Follow Redirect: ‚úì             ‚îÇ
‚îÇ   ‚Ä¢ Response Format: JSON          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## ‚úÖ –†–ï–®–ï–ù–ò–ï 2: –ò–∑–º–µ–Ω–∏—Ç—å Workflow Settings

1. –û—Ç–∫—Ä–æ–π—Ç–µ Workflow Settings
2. –ù–∞–π–¥–∏—Ç–µ "Execution Timeout"
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –º–∏–Ω–∏–º—É–º `300` (5 –º–∏–Ω—É—Ç) –∏–ª–∏ –±–æ–ª—å—à–µ
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

## ‚úÖ –†–ï–®–ï–ù–ò–ï 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—à –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π endpoint

–ú—ã —É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–ª–∏ endpoint `/api/moderation/submit`:
- ‚úÖ –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ (0-10ms)
- ‚úÖ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è

## üìã –ü–†–ò–ú–ï–† –ó–ê–ü–†–û–°–ê –î–õ–Ø n8n

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ HTTP Request node:
```json
{
  "method": "POST",
  "url": "http://192.168.1.189:3000/api/moderation/submit",
  "authentication": "genericCredentialType",
  "genericAuthType": "httpHeaderAuth",
  "sendHeaders": true,
  "headerParameters": {
    "parameters": [
      {
        "name": "X-API-Key",
        "value": "test_api_key_123456"
      },
      {
        "name": "Content-Type", 
        "value": "application/json"
      }
    ]
  },
  "sendBody": true,
  "bodyParameters": {
    "parameters": [
      {
        "name": "image_url",
        "value": "={{$json.image_url}}"
      },
      {
        "name": "product_id",
        "value": "={{$json.product_id}}"
      },
      {
        "name": "download_url",
        "value": "={{$json.download_url}}"
      },
      {
        "name": "metadata",
        "value": "={{$json.metadata}}"
      }
    ]
  },
  "options": {
    "timeout": 5000,
    "maxRedirects": 5,
    "followRedirect": true,
    "responseFormat": "json"
  }
}
```

### –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö:
```json
{
  "image_url": "https://arxion.ru/u/catalog_item_images/33237-913385-2.jpg",
  "product_id": "000001002CVK",
  "download_url": "https://arxion.ru/u/catalog_item_images/33237-913385-2.jpg",
  "metadata": {
    "name": "–ü—Ä–∏–ø–æ–π —Å –∫–∞–Ω–∏—Ñ–æ–ª—å—é, D 2 –º–º, 50 –≥, POS61, –Ω–∞ –ø–ª–∞—Å—Ç–º–∞—Å—Å–æ–≤–æ–π –∫–∞—Ç—É—à–∫–µ –°–∏–±—Ä—Ç–µ—Ö 913385"
  }
}
```

### –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:
```json
{
  "success": true,
  "data": {
    "moderation_id": "a83e923e-5eda-4d0f-b49c-882bc0cd1dfc",
    "status": "pending",
    "submitted_at": "2026-02-16T21:03:02.275Z"
  }
}
```

## üöÄ –ë–´–°–¢–†–´–ô –¢–ï–°–¢

### –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:
```bash
curl -X POST "http://192.168.1.189:3000/api/moderation/submit" \
  -H "X-API-Key: test_api_key_123456" \
  -H "Content-Type: application/json" \
  -d '{
    "image_url": "https://arxion.ru/u/catalog_item_images/33237-913385-2.jpg",
    "product_id": "TEST-001",
    "download_url": "https://arxion.ru/u/catalog_item_images/33237-913385-2.jpg",
    "metadata": {
      "name": "–¢–µ—Å—Ç–æ–≤—ã–π —Ç–æ–≤–∞—Ä"
    }
  }' \
  --max-time 5  # –¢–∞–π–º–∞—É—Ç 5 —Å–µ–∫—É–Ω–¥
```

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
cd moderation-system
./manage.sh logs  # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f backend/backend.log  # –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
```

### –ö–ª—é—á–µ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ª–æ–≥–∞—Ö:
- `‚úÖ –ë—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∑–∞ Xms` - —É—Å–ø–µ—à–Ω—ã–π –±—ã—Å—Ç—Ä—ã–π –æ—Ç–≤–µ—Ç
- `üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î` - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
- `‚ùå –û—à–∏–±–∫–∞` - –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–ø—Ä–æ—Å–æ–º

## üÜò –¢–†–û–£–ë–õ–®–£–¢–ò–ù–ì

### –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –ø–æ–ª—É—á–∞–µ—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã:
1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å**: `ping 192.168.1.189`
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å**: `curl http://192.168.1.189:3000/health`
3. **–£–≤–µ–ª–∏—á—å—Ç–µ timeout –≤ n8n** –¥–æ 30000ms
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ firewall** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –≤ n8n

### –ö–æ–Ω—Ç–∞–∫—Ç—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
- **–°–µ—Ä–≤–µ—Ä**: http://192.168.1.189:3000
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: http://192.168.1.189:8080
- **API –∫–ª—é—á**: `test_api_key_123456`

## üéâ –†–ï–ó–£–õ–¨–¢–ê–¢

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ n8n:
1. ‚úÖ –ó–∞–ø—Ä–æ—Å—ã –±—É–¥—É—Ç —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è
2. ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –∏—Å—á–µ–∑–Ω—É—Ç
3. ‚úÖ –î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º—É –º–æ–¥–µ—Ä–∞—Ü–∏–∏
4. ‚úÖ –ú–æ–∂–Ω–æ –±—É–¥–µ—Ç –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å n8n!** üöÄ
