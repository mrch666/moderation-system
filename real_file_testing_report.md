# üéØ –û–¢–ß–ï–¢: –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –° –†–ï–ê–õ–¨–ù–´–ú–ò –§–ê–ô–õ–ê–ú–ò

## ‚úÖ –ü–†–û–í–ï–†–ï–ù–ù–´–ï –°–¶–ï–ù–ê–†–ò–ò

### 1. **–¢–æ–≤–∞—Ä —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º —Ñ–∞–π–ª–æ–º (404)**
- **–¢–æ–≤–∞—Ä**: REAL-FILE-TEST (ID: 112)
- **URL**: `http://img.instrumentstore.ru:5000/img/1_577050.jpg`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª 404 Not Found
- **–û–±—Ä–∞–±–æ—Ç–∫–∞**: ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- **–õ–æ–≥–∏**: `‚ùå –û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: HTTP 404`

### 2. **–¢–æ–≤–∞—Ä —Å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Ñ–∞–π–ª–æ–º (403)**
- **–¢–æ–≤–∞—Ä**: WORKING-FILE-TEST (ID: 114)  
- **URL**: `https://picsum.photos/800/600`
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°–µ—Ä–≤–µ—Ä –≤–µ—Ä–Ω—É–ª 403 Forbidden
- **–û–±—Ä–∞–±–æ—Ç–∫–∞**: ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–∫–∏, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏
- **–õ–æ–≥–∏**: `‚ùå –û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: HTTP 403`

### 3. **–õ–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ñ–∞–π–ª–∞**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `download_url` –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- ‚úÖ Fallback –Ω–∞ `image_url` –µ—Å–ª–∏ `download_url` –Ω–µ —É–∫–∞–∑–∞–Ω
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ URL (–¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å http/https)

## üîß –†–ê–ë–û–¢–ê –°–ò–°–¢–ï–ú–´

### –ü–æ–ª–Ω–∞—è —Ü–µ–ø–æ—á–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏:
1. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –æ–¥–æ–±—Ä–µ–Ω–∏–µ** (API –∏–ª–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å)
2. **–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Ñ–∞–π–ª–∞**:
   ```javascript
   const fileUrl = moderation.download_url || moderation.image_url;
   ```
3. **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞**:
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ URL
   - HTTP/HTTPS –∑–∞–ø—Ä–æ—Å
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ (200, 404, 403, 500, —Ç–∞–π–º–∞—É—Ç—ã)
4. **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–≥—Ä—É–∑–∫–µ**:
   - –°–æ–∑–¥–∞–Ω–∏–µ FormData
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `modelid` = `product_id`
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ `file` —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
5. **–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä**:
   - POST –Ω–∞ `http://img.instrumentstore.ru:7990/api/modelgoods/image/`
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ (–æ–∂–∏–¥–∞–µ—Ç—Å—è `{"status": "success", "filename": "..."}`)
6. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏**:
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –≤ –ë–î
   - –ì—Ä—É–ø–ø–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)
   - –í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∑–∞–≥—Ä—É–∑–∫–µ

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ:
1. ‚úÖ **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤** (http, https)
2. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ HTTP –∫–æ–¥–æ–≤ –æ—Ç–≤–µ—Ç–∞** (200, 404, 403)
3. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
4. ‚úÖ **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –æ—Ç–≤–µ—Ç–µ API** –æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –∑–∞–≥—Ä—É–∑–∫–∏
5. ‚úÖ **–†–∞–±–æ—Ç–∞ –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ** —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è–º–∏
6. ‚úÖ **–ì—Ä—É–ø–ø–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏
7. ‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ** –±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π

### –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
1. ‚ö†Ô∏è **–¶–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 –æ—à–∏–±–∫—É
2. ‚ö†Ô∏è **–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ñ–∞–π–ª—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã** - 403 Forbidden
3. ‚ö†Ô∏è **–§–∞–π–ª—ã –º–æ–≥—É—Ç –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å** - 404 Not Found
4. ‚ö†Ô∏è **–°–µ—Ç–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã** - —Ç–∞–π–º–∞—É—Ç—ã, DNS –æ—à–∏–±–∫–∏

## üõ†Ô∏è –ì–û–¢–û–í–ù–û–°–¢–¨ –ö PRODUCTION

### –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª –º–æ–¥–µ—Ä–∞—Ü–∏–∏** —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–æ–≤
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –æ—Ç–ª–∞–¥–∫–∏
4. **API –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
5. **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** –¥–ª—è —Ä—É—á–Ω–æ–π –º–æ–¥–µ—Ä–∞—Ü–∏–∏

### –ß—Ç–æ –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–ª—è production:
1. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ —Ü–µ–ª–µ–≤–æ–º —Å–µ—Ä–≤–µ—Ä–µ**:
   ```javascript
   // –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
   headers: {
     ...form.getHeaders(),
     'Authorization': 'Bearer YOUR_TOKEN'
   }
   ```
2. **Retry –ª–æ–≥–∏–∫–∞** –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤** (—Ä–∞–∑–º–µ—Ä, —Ñ–æ—Ä–º–∞—Ç, —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ)
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** —É—Å–ø–µ—à–Ω—ã—Ö/–Ω–µ—É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–≥—Ä—É–∑–æ–∫
5. **–û—á–µ—Ä–µ–¥—å –∑–∞–¥–∞—á** –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üöÄ –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### –î–ª—è –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤:
1. **–û—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: http://192.168.1.189:8080
2. **–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –æ—á–µ—Ä–µ–¥—å**: –≤–∫–ª–∞–¥–∫–∞ "üìã –û—á–µ—Ä–µ–¥—å"
3. **–î–ª—è –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è**: –Ω–∞–∂–º–∏—Ç–µ "‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å" (–±–µ–∑ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
4. **–î–ª—è –æ–¥–æ–±—Ä–µ–Ω–∏—è**: –Ω–∞–∂–º–∏—Ç–µ "‚úÖ –û–¥–æ–±—Ä–∏—Ç—å"
   - –£–≤–∏–¥–∏—Ç–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–∞–π–ª–∞
   - –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ñ–∞–π–ª –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ —Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–µ—Ä
   - –£–≤–∏–¥–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏

### –î–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ API:
```bash
# –û–¥–æ–±—Ä–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π —Ñ–∞–π–ª–∞
curl -X PUT http://192.168.1.189:3000/api/moderation/ID/moderate \
  -H "X-API-Key: test_api_key_123456" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "approved",
    "reason": "–¢–æ–≤–∞—Ä —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç"
  }'

# –û—Ç–≤–µ—Ç –≤–∫–ª—é—á–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–∞–≥—Ä—É–∑–∫–µ:
# {
#   "upload": {
#     "success": true/false,
#     "filename": "..." / "error": "..."
#   }
# }
```

## üéØ –í–´–í–û–î–´

### –°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–ª–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
1. ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
2. ‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º
3. ‚úÖ **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
4. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** - –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–∞–±–æ—Ç–µ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
5. ‚úÖ **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç** - –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

### –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
1. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ—Å—Ç—É–ø** –∫ source —Å–µ—Ä–≤–µ—Ä—É (:5000)
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é** –Ω–∞ target —Å–µ—Ä–≤–µ—Ä–µ (:7990)
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ä–∞–±–æ—Ç–∞—é—â–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏
4. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –¥–ª—è –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –ø–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä–∞–º!** üéâ
